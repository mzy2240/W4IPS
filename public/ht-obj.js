!function(m,L,l){"use strict";var S="ht",N=m[S],I=null,o=Math,P=o.abs,J=o.max,O=Number.MAX_VALUE,j=N.Default,C=j.getInternal(),u=j.clone,U=C.vec3TransformMat4,B=C.appendArray,q=function(){var S=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,Q=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,K=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,y=function(v,E){return E=parseInt(E),E>=0?v[E-1]:v[E+v.length]},r=function(E,_,J,M,V,e){if(E.vs){var p=y(_,M),G=y(_,V),S=y(_,e),j=J.matrix,i=E.vs;if(J.flipFace){var b=G;G=S,S=b}j?(B(i,U(u(p),j)),B(i,U(u(G),j)),B(i,U(u(S),j))):(B(i,p),B(i,G),B(i,S))}},G=function(g,q,F,$,O,P){if(g.vs){var C=y(q,$),s=y(q,O),K=y(q,P),S=F.flipY;if(F.flipFace){var M=s;s=K,K=M}g.uv.push(C[0],S?1-C[1]:C[1],s[0],S?1-s[1]:s[1],K[0],S?1-K[1]:K[1])}},p=function(i,G,l,$,g,E){if(i.vs){var Y=y(G,$),e=y(G,g),D=y(G,E),h=l.normalMatrix,H=i.ns;if(l.flipFace){var c=e;e=D,D=c}h?(B(H,U(u(Y),h)),B(H,U(u(e),h)),B(H,U(u(D),h))):(B(H,Y),B(H,e),B(H,D))}},V=function(v,N,g,A,E,u,S,i){var U=A&&A.length&&i;u[3]===l?(r(v,N,E,u[0],u[1],u[2]),S&&G(v,g,E,S[0],S[1],S[2]),U&&p(v,A,E,i[0],i[1],i[2])):(r(v,N,E,u[0],u[1],u[3]),r(v,N,E,u[1],u[2],u[3]),S&&(G(v,g,E,S[0],S[1],S[3]),G(v,g,E,S[1],S[2],S[3])),U&&(p(v,A,E,i[0],i[1],i[3]),p(v,A,E,i[1],i[2],i[3])))},x=function(X,H,q,x){var Z,R,n,U,v,p,Q,$=O,e=O,_=O,G=-O,K=-O,S=-O;for(Z in X)for(p=X[Z].vs,Q=p.length,R=0;Q>R;R+=3)n=p[R+0],U=p[R+1],v=p[R+2],$>n&&($=n),e>U&&(e=U),_>v&&(_=v),n>G&&(G=n),U>K&&(K=U),v>S&&(S=v);if(q){var y=$+(G-$)/2,l=e+(K-e)/2,t=_+(S-_)/2;for(Z in X)for(p=X[Z].vs,Q=p.length,R=0;Q>R;R+=3)p[R+0]-=y,p[R+1]-=l,p[R+2]-=t}var m,h,a;q?(m=G-$,h=K-e,a=S-_):(m=2*J(P($),P(G)),h=2*J(P(e),P(K)),a=2*J(P(_),P(S))),0===m&&(m=Math.min(h,a)/1e3||.001),0===h&&(h=Math.min(m,a)/1e3||.001),0===a&&(a=Math.min(m,h)/1e3||.001),x.rawS3=[m,h,a];for(Z in X){if(p=X[Z].vs,H)for(Q=p.length,R=0;Q>R;R+=3)m&&(p[R+0]/=m),h&&(p[R+1]/=h),a&&(p[R+2]/=a);X[Z].rawS3=x.rawS3}};return function(t,F,D){if(!t)return I;(C.isString(F)||F instanceof ArrayBuffer)&&(F=_(F)),D||(D={}),D.flipY==I&&(D.flipY=!0),(D.s3||D.r3||D.t3||D.mat)&&(D.matrix=C.createWorldMatrix(D.mat,D.s3,D.r3,D.rotationMode,D.t3));var r,M,u,U,W,o,n=[],P=[],h=D.ignoreNormal?I:[],X=D.reverseFlipMtls,N={vs:[],uv:[],ns:h?[]:I},J={htdefault:N},d=new H(t);for(h&&D.matrix&&(D.normalMatrix=C.createNormalMatrix(D.matrix));null!=(M=d.stepNext());)if(M=M.trim(),0!==M.length&&"#"!==M.charAt(0))if(M.indexOf("#QNAN0")>=0&&(M=M.replace(/#QNAN0/gi,"0")),u=S.exec(M))n.push([parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])]);else if(u=Q.exec(M))P.push([parseFloat(u[1]),parseFloat(u[2])]);else if(h&&(u=K.exec(M)))D.flipFace?h.push([parseFloat(-u[1]),parseFloat(-u[2]),parseFloat(-u[3])]):h.push([parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])]);else if("f"===M[0]){var b=M.split(/\s+/);if(b.length<4)continue;var A,r,m,i=[],v=[],R=[];for(r=1,m=b.length;m>r;r++)A=b[r].split("/"),i.push(parseInt(A[0],10)),A.length>1&&A[1].length>0&&R.push(parseInt(A[1],10)),A.length>2&&A[2].length>0&&v.push(parseInt(A[2],10));for(r=0,m=i.length-2;m>r;r++)V(N,n,P,h,D,[i[0],i[r+1],i[r+2]],R.length?[R[0],R[r+1],R[r+2]]:I,v.length?[v[0],v[r+1],v[r+2]]:I)}else if(/^usemtl /.test(M)&&(U=M.substring(7).trim(),!(N=J[U]))){if(N={name:U,vs:[],uv:[],ns:h?[]:I},D.ignoreMtls&&D.ignoreMtls.indexOf(U)>=0&&delete N.vs,(D.reverseFlip||"*"===X||X&&X.indexOf(U)>=0)&&(N.reverseFlip=!0),F&&(W=F[U],W&&(D.ignoreColor||(N.color=W.kd),!D.ignoreTransparent&&W.d>0&&W.d<1&&(N.transparent=!0,N.opacity=W.d),!D.ignoreImage&&(o=W.map_kd)))){o=o.split(" ");var B=-1;for(r=0;r<o.length;r++)"-o"===o[r]?(N.uvOffset=[parseFloat(o[r+1]),parseFloat(o[r+2])],r+=3,B=r):"-s"===o[r]&&(N.uvScale=[parseFloat(o[r+1]),parseFloat(o[r+2])],r+=3,B=r);N.image=(D.prefix||"")+o.splice(B+1).join(" ")}J[U]=N}var a=[];for(var f in J){var z=J[f].vs;z&&0!==z.length||a.push(f)}a.forEach(function(N){delete J[N]}),x(J,D.cube,D.center,D);var s=D.shape3d;if(s){var p=[];for(var U in J){var N=J[U];p.rawS3=N.rawS3,p.push(N)}j.setShape3dModel(s,p)}return J}}(),_=function(F){var g={};if(F)for(var t,Y,L,s,W,K,U=new H(F),N=/\s+/;null!=(Y=U.stepNext());)Y=Y.trim(),0!==Y.length&&"#"!==Y.charAt(0)&&(L=Y.indexOf(" "),s=(L?Y.substring(0,L):Y).toLowerCase(),W=(L?Y.substring(L+1):"").trim(),"newmtl"===s?g[W]=t={name:W}:t&&("ka"===s||"kd"===s||"ks"===s?(K=W.split(N,3),t[s]=[parseFloat(K[0]),parseFloat(K[1]),parseFloat(K[2]),1]):t[s]="ns"===s||"d"===s?parseFloat(W):W));return g},H=function(n){var r=this;if(n instanceof ArrayBuffer){r.isBuffer=!0;var l=0,W=new Uint8Array(n),X=W.length,N=W.length;r.stepNext=function(){for(var v,p,B=l;X>l;)if(v=W[l],p=v>>4,12===p||13==p)l+=2;else if(14===p)l+=3;else if(l++,10===v)return String.fromCharCode.apply(null,W.subarray(B,l));return l>B?String.fromCharCode.apply(null,W.subarray(B,l)):null}}else{r.isBuffer=!1;var F=n.split("\n"),e=0,N=F.length;r.stepNext=function(){return N>e?F[e++]:null}}};H.prototype={},H.prototype.constructor=H,C.addMethod(j,{loadObj:function(e,y,s){s=s||{};var p=!1;/(MSIE |Trident\/|Edge\/)/.test(m.navigator.userAgent)&&(p=!0);var f=function(b){var O,i=s.finishFunc,c=s.shape3d,m=b?q(b[0],b[1],s):null;if(m){if(c)O=j.getShape3dModel(c);else{O=[];for(var I in m){var U=m[I];O.rawS3=U.rawS3,O.push(U)}}i&&i(m,O,O.rawS3)}else i&&i(null)};if(p){var O=function(G){s.responseType="arraybuffer",j.xhrLoad(e,function(X){f([X,G])},s)};y?j.xhrLoad(y,function(s){O(s)},s):O()}else j.xhrLoad(y?[e,y]:[e],f,s)},parseObj:function(i,L,S){return q(i,L,S)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);