!function(c){"use strict";var r="ht",l=c[r],J=Math,k=J.max,F=J.min,o=J.abs,M=J.atan2,$=(J.cos,J.sin,J.ceil),d=l.Default,E=d.getInternal(),b=l.List,s=E.Mat,w=E.getNodeRect,y=E.intersectionLineRect,u=d.getDistance,i=d.setEdgeType,B="left",W="right",n="top",O="bottom",t="edge.type",v="edge.gap",S="edge.center",q="edge.extend",A=function(R,v){return w(R,v).width},U=function(S,G){return w(S,G).height},m=function(L,q){return E.getEdgeAgentPosition(L,q._40I,q.s("edge.source.position"),q.s("edge.source.offset.x"),q.s("edge.source.offset.y"),q.s("edge.source.anchor.x"),q.s("edge.source.anchor.y"))},K=function(a,O){return E.getEdgeAgentPosition(a,O._41I,O.s("edge.target.position"),O.s("edge.target.offset.x"),O.s("edge.target.offset.y"),O.s("edge.target.anchor.x"),O.s("edge.target.anchor.y"))},Y=function(U,b){var k=U.s(t),c=U.getEdgeGroup();if(c){var a=0;if(c.eachSiblingEdge(function(S){b.isVisible(S)&&S.s(t)==k&&a++}),a>1)return U.s(v)*(a-1)/2}return 0},R=function(y,G){var w=y.s(t),z=y.isLooped();if(!y.getEdgeGroup())return z?y.s(v):0;var r,q=0,o=0,I=0;return y.getEdgeGroup().getSiblings().each(function(p){p.each(function(V){if(V._40I===y._40I&&V.s(t)==w&&G.isVisible(V)){var f=V.s(v);r?(o+=I/2+f/2,I=f):(r=V,I=f),V===y&&(q=o)}})}),z?o-q+I:q-o/2},g=function(y,z){var g=z.s("edge.corner.radius");return d.toRoundedCorner(y,g)};E.addMethod(l.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),i("boundary",function(O,j,n,g){g||(j=-j);var V,Z=m(n,O),k=K(n,O),c=w(n,O._40I),J=w(n,O._41I),e=new s(M(k.y-Z.y,k.x-Z.x)),R=u(Z,k),F=Z.x,h=Z.y;return V=e.tf(0,j),Z={x:V.x+F,y:V.y+h},V=e.tf(R,j),k={x:V.x+F,y:V.y+h},V=y(Z,k,c),V&&(Z={x:V[0],y:V[1]}),V=y(Z,k,J),V&&(k={x:V[0],y:V[1]}),{points:new b([Z,k])}}),i("ripple",function(O,H,g,R){R||(H=-H);var t=m(g,O),j=K(g,O),w=u(t,j),Z=F(O.s("edge.offset"),w/2),x=O.s("edge.ripple.size"),W=O.s("edge.ripple.length"),E=O.s("edge.ripple.both"),N=O.s(S),e=O.s("edge.ripple.elevation"),d=new b,P=O.s("edge.ripple.straight")?null:new b,I=new s(M(j.y-t.y,j.x-t.x));R||(e=-e),w-=2*Z,W>0&&(x=$(w/W));var A=w/x;P&&P.add(1);for(var J=0;x>J;J++)P&&P.add(3),0===J?d.add({x:Z+A*J,y:N?0:H}):d.add({x:Z+A*J,y:H}),d.add({x:Z+A*J+A/2,y:e+H}),E&&(e=-e);for(d.add({x:Z+w,y:N?0:H}),J=0;J<d.size();J++){var B=I.tf(d.get(J));B.x+=t.x,B.y+=t.y,d.set(J,B)}return{points:d,segments:P}}),i("h.v",function(j,t,N){t=R(j,N);var y=new b,c=j.s(S),k=m(N,j),G=k.x,w=k.y,p=K(N,j),r=p.x,_=p.y,d=0,e=0,Y=r-G,s=_-w;return c||(d=A(N,j._40I)/2,e=U(N,j._41I)/2),Y>=0&&0>=s?(y.add({x:G+d,y:w+t}),y.add({x:r+t,y:w+t}),y.add({x:r+t,y:_+e})):0>=Y&&s>=0?(y.add({x:G-d,y:w+t}),y.add({x:r+t,y:w+t}),y.add({x:r+t,y:_-e})):Y>=0&&s>=0?(y.add({x:G+d,y:w+t}),y.add({x:r-t,y:w+t}),y.add({x:r-t,y:_-e})):(y.add({x:G-d,y:w+t}),y.add({x:r-t,y:w+t}),y.add({x:r-t,y:_+e})),g(y,j)}),i("v.h",function(J,B,c){B=R(J,c);var M=new b,I=J.s(S),D=m(c,J),k=D.x,v=D.y,t=K(c,J),o=t.x,Y=t.y,F=0,H=0,W=o-k,L=Y-v;return I||(F=A(c,J._41I)/2,H=U(c,J._40I)/2),W>=0&&0>=L?(M.add({x:k+B,y:v-H}),M.add({x:k+B,y:Y+B}),M.add({x:o-F,y:Y+B})):0>=W&&L>=0?(M.add({x:k+B,y:v+H}),M.add({x:k+B,y:Y+B}),M.add({x:o+F,y:Y+B})):W>=0&&L>=0?(M.add({x:k-B,y:v+H}),M.add({x:k-B,y:Y+B}),M.add({x:o-F,y:Y+B})):(M.add({x:k-B,y:v-H}),M.add({x:k-B,y:Y+B}),M.add({x:o+F,y:Y+B})),g(M,J)}),i("ortho",function(B,n,e){var t=new b,a=B.s(S),R=B.s("edge.ortho"),L=B._40I,M=B._41I,C=m(e,B),D=C.x,k=C.y,J=K(e,B),$=J.x,c=J.y,P=$-D,l=c-k,H=a?0:A(e,L)/2,s=a?0:U(e,L)/2,z=a?0:A(e,M)/2,O=a?0:U(e,M)/2,v=(P-(H+z)*(P>0?1:-1))*R,I=(l-(s+O)*(l>0?1:-1))*R;return o(P)<o(l)?P>=0&&0>=l?(t.add({x:D+n,y:k-s}),t.add({x:D+n,y:k+I+n-s}),t.add({x:$+n,y:k+I+n-s}),t.add({x:$+n,y:c+O})):0>=P&&l>=0?(t.add({x:D+n,y:k+s}),t.add({x:D+n,y:k+I+n+s}),t.add({x:$+n,y:k+I+n+s}),t.add({x:$+n,y:c-O})):P>=0&&l>=0?(t.add({x:D+n,y:k+s}),t.add({x:D+n,y:k+I-n+s}),t.add({x:$+n,y:k+I-n+s}),t.add({x:$+n,y:c-O})):(t.add({x:D+n,y:k-s}),t.add({x:D+n,y:k+I-n-s}),t.add({x:$+n,y:k+I-n-s}),t.add({x:$+n,y:c+O})):P>=0&&0>=l?(t.add({x:D+H,y:k+n}),t.add({x:D+v+n+H,y:k+n}),t.add({x:D+v+n+H,y:c+n}),t.add({x:$-z,y:c+n})):0>=P&&l>=0?(t.add({x:D-H,y:k+n}),t.add({x:D+v+n-H,y:k+n}),t.add({x:D+v+n-H,y:c+n}),t.add({x:$+z,y:c+n})):P>=0&&l>=0?(t.add({x:D+H,y:k+n}),t.add({x:D+v-n+H,y:k+n}),t.add({x:D+v-n+H,y:c+n}),t.add({x:$-z,y:c+n})):(t.add({x:D-H,y:k+n}),t.add({x:D+v-n-H,y:k+n}),t.add({x:D+v-n-H,y:c+n}),t.add({x:$+z,y:c+n})),g(t,B)}),i("flex",function(z,P,N){var G=new b,x=z.s("edge.flex")+Y(z,N),I=z.s(S),E=z._40I,h=z._41I,Z=m(N,z),r=Z.x,s=Z.y,d=K(N,z),X=d.x,q=d.y,M=X-r,H=q-s,y=I?0:A(N,E)/2,i=I?0:U(N,E)/2,t=I?0:A(N,h)/2,_=I?0:U(N,h)/2,k=M>0?x:-x,$=H>0?x:-x;return o(M)<o(H)?M>=0&&0>=H?(G.add({x:r+P,y:s-i}),G.add({x:r+P,y:s+$+P-i}),G.add({x:X+P,y:q-$+P+_}),G.add({x:X+P,y:q+_})):0>=M&&H>=0?(G.add({x:r+P,y:s+i}),G.add({x:r+P,y:s+$+P+i}),G.add({x:X+P,y:q-$+P-_}),G.add({x:X+P,y:q-_})):M>=0&&H>=0?(G.add({x:r+P,y:s+i}),G.add({x:r+P,y:s+$-P+i}),G.add({x:X+P,y:q-$-P-_}),G.add({x:X+P,y:q-_})):(G.add({x:r+P,y:s-i}),G.add({x:r+P,y:s+$-P-i}),G.add({x:X+P,y:q-$-P+_}),G.add({x:X+P,y:q+_})):M>=0&&0>=H?(G.add({x:r+y,y:s+P}),G.add({x:r+k+P+y,y:s+P}),G.add({x:X-k+P-t,y:q+P}),G.add({x:X-t,y:q+P})):0>=M&&H>=0?(G.add({x:r-y,y:s+P}),G.add({x:r+k+P-y,y:s+P}),G.add({x:X-k+P+t,y:q+P}),G.add({x:X+t,y:q+P})):M>=0&&H>=0?(G.add({x:r+y,y:s+P}),G.add({x:r+k-P+y,y:s+P}),G.add({x:X-k-P-t,y:q+P}),G.add({x:X-t,y:q+P})):(G.add({x:r-y,y:s+P}),G.add({x:r+k-P-y,y:s+P}),G.add({x:X-k-P+t,y:q+P}),G.add({x:X+t,y:q+P})),g(G,z)}),i("extend.east",function(p,$,v){var w=new b,X=p.s(q)+Y(p,v),J=p.s(S),n=m(v,p),T=n.x+(J?0:A(v,p._40I)/2),H=n.y,r=K(v,p),c=r.x+(J?0:A(v,p._41I)/2),x=r.y,V=k(T,c)+X;return H>x?(w.add({x:T,y:H+$}),w.add({x:V+$,y:H+$}),w.add({x:V+$,y:x-$}),w.add({x:c,y:x-$})):(w.add({x:T,y:H-$}),w.add({x:V+$,y:H-$}),w.add({x:V+$,y:x+$}),w.add({x:c,y:x+$})),g(w,p)}),i("extend.west",function(t,_,$){var a=new b,w=t.s(q)+Y(t,$),U=t.s(S),I=m($,t),C=I.x-(U?0:A($,t._40I)/2),u=I.y,p=K($,t),M=p.x-(U?0:A($,t._41I)/2),k=p.y,P=F(C,M)-w;return u>k?(a.add({x:C,y:u+_}),a.add({x:P-_,y:u+_}),a.add({x:P-_,y:k-_}),a.add({x:M,y:k-_})):(a.add({x:C,y:u-_}),a.add({x:P-_,y:u-_}),a.add({x:P-_,y:k+_}),a.add({x:M,y:k+_})),g(a,t)}),i("extend.north",function(N,c,A){var I=new b,Q=N.s(q)+Y(N,A),Z=N.s(S),z=m(A,N),n=z.x,C=z.y-(Z?0:U(A,N._40I)/2),k=K(A,N),O=k.x,J=k.y-(Z?0:U(A,N._41I)/2),G=F(C,J)-Q;return n>O?(I.add({y:C,x:n+c}),I.add({y:G-c,x:n+c}),I.add({y:G-c,x:O-c}),I.add({y:J,x:O-c})):(I.add({y:C,x:n-c}),I.add({y:G-c,x:n-c}),I.add({y:G-c,x:O+c}),I.add({y:J,x:O+c})),g(I,N)}),i("extend.south",function(H,X,$){var D=new b,y=H.s(q)+Y(H,$),B=H.s(S),i=m($,H),Z=i.x,t=i.y+(B?0:U($,H._40I)/2),l=K($,H),s=l.x,O=l.y+(B?0:U($,H._41I)/2),e=k(t,O)+y;return Z>s?(D.add({y:t,x:Z+X}),D.add({y:e+X,x:Z+X}),D.add({y:e+X,x:s-X}),D.add({y:O,x:s-X})):(D.add({y:t,x:Z-X}),D.add({y:e+X,x:Z-X}),D.add({y:e+X,x:s+X}),D.add({y:O,x:s+X})),g(D,H)});var P=function(C,a,m,e,J){if(e.sort(function(q,T){var o=q.getSourceAgent()===a?q.getTargetAgent():q.getSourceAgent(),c=T.getSourceAgent()===a?T.getTargetAgent():T.getSourceAgent(),g=o.p(),t=c.p();if(m===B||m===W){if(g.y>t.y)return 1;if(g.y<t.y)return-1}else{if(g.x>t.x)return 1;if(g.x<t.x)return-1}return d.sortFunc(q.getId(),T.getId())}),J){for(var M,Z,z,u=C.getSourceAgent(),Q=C.getTargetAgent(),o=0;o<e.size();o++){var D=e.get(o);D.getSourceAgent()===u&&D.getTargetAgent()===Q||D.getTargetAgent()===u&&D.getSourceAgent()===Q?(Z||(Z=new b),Z.add(D,0)):Z?(z||(z=new b),z.add(D)):(M||(M=new b),M.add(D))}e.clear(),M&&e.addAll(M),Z&&e.addAll(Z),z&&e.addAll(z)}var L=e.indexOf(C),I=e.size(),E=C.s(v);return{side:m,index:L,size:I,offset:-E*(I-1)/2+E*L}},G=function(v,I,J,r,V){var h=I.s(t);return P(I,J,r,J.getAgentEdges().toList(function(g){return v.isVisible(g)&&g.s(t)===h}),V)},_=function(Z,I){var V=Z.getSourceAgent()===I?Z.getTargetAgent():Z.getSourceAgent(),u=I.p(),y=V.p(),S=y.x-u.x,m=y.y-u.y;return S>0&&o(m)<=S?W:0>S&&o(m)<=-S?B:m>0&&o(S)<=m?O:n},X=function($,W,T){var k=W.s(t),Z=_(W,T);return P(W,T,Z,T.getAgentEdges().toList(function(y){return $.isVisible(y)&&y.s(t)===k&&_(y,T)===Z}))},h=function(Z,Y){var s=Z.getSourceAgent()===Y,U=s?Z.getTargetAgent():Z.getSourceAgent(),z=Y.p(),e=U.p();return s?z.y>e.y?n:O:z.x<e.x?W:B},C=function(z,y,k){var p=y.s(t),H=h(y,k);return P(y,k,H,k.getAgentEdges().toList(function(R){return z.isVisible(R)&&R.s(t)===p&&h(R,k)===H}),H===W||H===O)},H=function(f,V){var r=f.getSourceAgent()===V,Y=r?f.getTargetAgent():f.getSourceAgent(),M=V.p(),J=Y.p();return r?M.x<J.x?W:B:M.y>J.y?n:O},p=function(o,J,F){var R=J.s(t),Y=H(J,F);return P(J,F,Y,F.getAgentEdges().toList(function(g){return o.isVisible(g)&&g.s(t)===R&&H(g,F)===Y}),Y===W||Y===O)},D=function(F,L,k){var p=F.getSourceAgent(),h=F.getTargetAgent(),t=p.getId()>h.getId(),c=t?h:p,Q=t?p:h,G=c.p(),X=Q.p(),T=k(L,F,c),V=k(L,F,Q),i=F.s(S),J=i?0:A(L,c)/2,$=i?0:A(L,Q)/2,z=i?0:U(L,c)/2,j=i?0:U(L,Q)/2,E=T.offset,M=V.offset,P=T.side,o=V.side,Y=new b;return P===n?(Y.add({x:G.x+E,y:G.y-z}),Y.add({x:G.x+E,y:X.y+M}),o===B?Y.add({x:X.x-$,y:X.y+M}):Y.add({x:X.x+$,y:X.y+M})):P===O?(Y.add({x:G.x+E,y:G.y+z}),Y.add({x:G.x+E,y:X.y+M}),o===B?Y.add({x:X.x-$,y:X.y+M}):Y.add({x:X.x+$,y:X.y+M})):P===B?(Y.add({x:G.x-J,y:G.y+E}),Y.add({x:X.x+M,y:G.y+E}),o===O?Y.add({x:X.x+M,y:X.y+j}):Y.add({x:X.x+M,y:X.y-j})):P===W&&(Y.add({x:G.x+J,y:G.y+E}),Y.add({x:X.x+M,y:G.y+E}),o===O?Y.add({x:X.x+M,y:X.y+j}):Y.add({x:X.x+M,y:X.y-j})),t&&Y.reverse(),g(Y,F)};i("ortho2",function(i,w,Z){var m,y,p=i.s(S),d=i.s("edge.ortho"),L=i.getSourceAgent(),T=i.getTargetAgent(),v=L.getId()>T.getId(),r=v?T:L,t=v?L:T,x=r.p(),D=t.p(),J=X(Z,i,r),l=X(Z,i,t),$=p?0:A(Z,r)/2,z=p?0:U(Z,r)/2,f=p?0:A(Z,t)/2,Q=p?0:U(Z,t)/2,F=new b,I=J.offset,Y=l.offset,E=J.side;return E===W?(m=D.y>x.y?-I:I,y=x.x+$+(D.x-f-x.x-$)*d,F.add({x:x.x+$,y:x.y+I}),F.add({x:y+m,y:x.y+I}),F.add({x:y+m,y:D.y+Y}),F.add({x:D.x-f,y:D.y+Y})):E===B?(m=D.y>x.y?-I:I,y=x.x-$-(x.x-$-D.x-f)*d,F.add({x:x.x-$,y:x.y+I}),F.add({x:y-m,y:x.y+I}),F.add({x:y-m,y:D.y+Y}),F.add({x:D.x+f,y:D.y+Y})):E===O?(m=D.x>x.x?-I:I,y=x.y+z+(D.y-Q-x.y-z)*d,F.add({x:x.x+I,y:x.y+z}),F.add({x:x.x+I,y:y+m}),F.add({x:D.x+Y,y:y+m}),F.add({x:D.x+Y,y:D.y-Q})):E===n&&(m=D.x>x.x?-I:I,y=x.y-z-(x.y-z-D.y-Q)*d,F.add({x:x.x+I,y:x.y-z}),F.add({x:x.x+I,y:y-m}),F.add({x:D.x+Y,y:y-m}),F.add({x:D.x+Y,y:D.y+Q})),v&&F.reverse(),g(F,i)},!0),i("flex2",function(M,N,m){var C,Y=M.getSourceAgent(),V=M.getTargetAgent(),Z=Y.getId()>V.getId(),J=Z?V:Y,t=Z?Y:V,i=J.p(),D=t.p(),E=X(m,M,J),j=X(m,M,t),Q=M.s(S),I=M.s("edge.flex")+(E.size-1)/2*M.s(v),G=Q?0:A(m,J)/2,$=Q?0:U(m,J)/2,a=Q?0:A(m,t)/2,h=Q?0:U(m,t)/2,K=new b,H=E.offset,P=j.offset,q=E.side;return q===W?(C=D.y>i.y?-H:H,K.add({x:i.x+G,y:i.y+H}),K.add({x:i.x+G+I+C,y:i.y+H}),K.add({x:D.x-a-I+C,y:D.y+P}),K.add({x:D.x-a,y:D.y+P})):q===B?(C=D.y>i.y?-H:H,K.add({x:i.x-G,y:i.y+H}),K.add({x:i.x-G-I-C,y:i.y+H}),K.add({x:D.x+a+I-C,y:D.y+P}),K.add({x:D.x+a,y:D.y+P})):q===O?(C=D.x>i.x?-H:H,K.add({x:i.x+H,y:i.y+$}),K.add({x:i.x+H,y:i.y+$+I+C}),K.add({x:D.x+P,y:D.y-h-I+C}),K.add({x:D.x+P,y:D.y-h})):q===n&&(C=D.x>i.x?-H:H,K.add({x:i.x+H,y:i.y-$}),K.add({x:i.x+H,y:i.y-$-I-C}),K.add({x:D.x+P,y:D.y+h+I-C}),K.add({x:D.x+P,y:D.y+h})),Z&&K.reverse(),g(K,M)},!0),i("extend.north2",function(I,m,V){var L=I.getSourceAgent(),x=I.getTargetAgent(),R=L.getId()>x.getId(),h=R?x:L,E=R?L:x,Z=h.p(),A=E.p(),w=G(V,I,h,n),i=G(V,I,E,n,!0),_=I.s(S),N=_?0:U(V,h)/2,Y=_?0:U(V,E)/2,t=w.offset,e=i.offset,T=I.s(q)+(w.size-1)/2*I.s(v),D=F(Z.y-N,A.y-Y)-T+(Z.x<A.x?t:-t),f=new b;return f.add({x:Z.x+t,y:Z.y-N}),f.add({x:Z.x+t,y:D}),f.add({x:A.x+e,y:D}),f.add({x:A.x+e,y:A.y-Y}),R&&f.reverse(),g(f,I)},!0),i("extend.south2",function(h,W,j){var R=h.getSourceAgent(),m=h.getTargetAgent(),_=R.getId()>m.getId(),w=_?m:R,A=_?R:m,Q=w.p(),L=A.p(),H=G(j,h,w,O),d=G(j,h,A,O,!0),p=h.s(S),B=p?0:U(j,w)/2,E=p?0:U(j,A)/2,a=H.offset,P=d.offset,C=h.s(q)+(H.size-1)/2*h.s(v),i=k(Q.y+B,L.y+E)+C+(Q.x>L.x?a:-a),F=new b;return F.add({x:Q.x+a,y:Q.y+B}),F.add({x:Q.x+a,y:i}),F.add({x:L.x+P,y:i}),F.add({x:L.x+P,y:L.y+E}),_&&F.reverse(),g(F,h)},!0),i("extend.west2",function(D,W,$){var L=D.getSourceAgent(),_=D.getTargetAgent(),w=L.getId()>_.getId(),r=w?_:L,T=w?L:_,B=r.p(),X=T.p(),R=G($,D,r,n),H=G($,D,T,n,!0),p=D.s(S),u=p?0:A($,r)/2,t=p?0:A($,T)/2,M=R.offset,Y=H.offset,i=D.s(q)+(R.size-1)/2*D.s(v),c=F(B.x-u,X.x-t)-i+(B.y<X.y?M:-M),j=new b;return j.add({x:B.x-u,y:B.y+M}),j.add({x:c,y:B.y+M}),j.add({x:c,y:X.y+Y}),j.add({x:X.x-t,y:X.y+Y}),w&&j.reverse(),g(j,D)},!0),i("extend.east2",function(R,L,j){var T=R.getSourceAgent(),$=R.getTargetAgent(),K=T.getId()>$.getId(),F=K?$:T,d=K?T:$,U=F.p(),E=d.p(),I=G(j,R,F,n),X=G(j,R,d,n,!0),_=R.s(S),a=_?0:A(j,F)/2,N=_?0:A(j,d)/2,J=I.offset,O=X.offset,z=R.s(q)+(I.size-1)/2*R.s(v),m=k(U.x+a,E.x+N)+z+(U.y>E.y?J:-J),p=new b;return p.add({x:U.x+a,y:U.y+J}),p.add({x:m,y:U.y+J}),p.add({x:m,y:E.y+O}),p.add({x:E.x+N,y:E.y+O}),K&&p.reverse(),g(p,R)},!0),i("v.h2",function(j,Q,Y){return D(j,Y,C)},!0),i("h.v2",function(R,u,v){return D(R,v,p)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);