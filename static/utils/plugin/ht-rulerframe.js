!function(M,e){"use strict";var Y="position",H="absolute",d="relative",v="px",L="left",K="right",B="top",X="bottom",I="display",t="none",A="block",p=ht.Default,b=p.getInternal(),J=Math.floor,f=Math.ceil,j=Math.PI,S=null,l=M.parseInt,U=function(N){return N.getContext("2d")},W=function(){return document},G=function(f){return W().createElement(f)},T=function(){return G("canvas")},n=function(q,d,k){q.style.setProperty(d,k,S)},C=function(J,i,D){p.def(ht.widget[J],i,D)},Z=function(n,w){n.appendChild(w)},z=function(N,g){N.removeChild(g)},h=p.eventListenerOptionsFalse,c=(p.eventListenerOptionsTrue,function(e,W,V,o){e.addEventListener(W,V,o?h:h)}),D=function(o,p,s,S){o.removeEventListener(p,s,S?h:h)};ht.widget.RulerFrame=function(U){var Q=this,C=Q._view=b.createView(null,Q),m=Q.$1k=T(),v=Q.$2k=T(),G=Q.$3k=T(),_=Q.$4k=T();Q._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},Q._topRulerConfig={visible:!0},Q._rightRulerConfig={visible:!1},Q._bottomRulerConfig={visible:!1},Q._leftRulerConfig={visible:!0},Z(C,m),Z(C,G),Z(C,v),Z(C,_),n(C,Y,d),n(C,"box-sizing","border-box"),n(C,"-moz-box-sizing","border-box"),n(m,Y,H),n(v,Y,H),n(G,Y,H),n(_,Y,H),Q.$14k=function(){Q.$13k=1,Q.iv()},Q.$15k=function(d){if(Q._topRulerConfig.guideVisible||Q._rightRulerConfig.guideVisible||Q._bottomRulerConfig.guideVisible||Q._leftRulerConfig.guideVisible||Q._defaultRulerConfig.guideVisible||(Q._topRulerConfig.guideTipVisible||Q._rightRulerConfig.guideTipVisible||Q._bottomRulerConfig.guideTipVisible||Q._leftRulerConfig.guideTipVisible||Q._defaultRulerConfig.guideTipVisible)&&Q._component){var E=C.getBoundingClientRect();Q.$16k={x:d.clientX-E.left,y:d.clientY-E.top},Q.$5k()}},Q.setComponent(U)},C("RulerFrame",e,{ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(e){var l=this,x=l._component,d=l.getView();if(d){if(l._component=e,l.fp("component",x,e),x){var $=l.getComponentView(x);z(d,$),D(d,"mousemove",l.$15k),l.removeComponentPropertyChangeListener(x,l.$14k)}if(e){var m=l.getComponentView(e);Z(d,m),n(m,Y,H),c(d,"mousemove",l.$15k),l.addComponentPropertyChangeListener(e,l.$14k)}}},addComponentPropertyChangeListener:function(q,b){q&&q.mp&&q.mp(b)},removeComponentPropertyChangeListener:function(x,K){x&&x.ump&&x.ump(K)},getComponentHZoom:function(d){return d&&d.getZoom?d.getZoom():1},getComponentVZoom:function(t){return t&&t.getZoom?t.getZoom():1},getComponentViewRect:function(h){return h&&h.getViewRect?h.getViewRect():void 0},getComponentView:function(h){return h&&h.getView?h.getView():h},invalidateComponent:function(p){p&&p.iv&&p.iv()},validateComponent:function(N){N&&N.validate&&N.validate()},$7k:function($,l,h,w,J,p,v,H,R,V,N,o){if(l.visible){var x=this._defaultRulerConfig,j="borderStyle",c="borderColor",P="borderWidth",F="background",f=l[j]||x[j],d=l[c]||x[c],C=l[P]||x[P],g=l.size!=S?l.size:x.size,U=l[F]||x[F],O=g+C,T=this.$6k(C,f,d,$,h,J,O,v,H,R,V,N,o);n($,J,"0px"),p?b.setCanvas($,w-T,g):b.setCanvas($,g,w-T),n($,"background",U),n($,I,A)}else n($,I,t),n(this.getComponentView(this._component),J,"0px")},$6k:function(I,O,Z,F,p,X,R,f,E,y,g,e,B){var m=0;return n(F,p,I+"px "+O+" "+Z),n(this.getComponentView(this._component),X,R+v),f?(n(F,E,y+v),m+=y):n(F,E,"0px"),g?(n(F,e,B+v),m+=B):n(F,e,"0px"),m},validateImpl:function(){var x=this,f=x._component,Z=x.$1k,h=x.$2k,R=x.$3k,N=x.$4k,D=x._view,Y=x._defaultRulerConfig,m=x._topRulerConfig,E=x._rightRulerConfig,A=x._bottomRulerConfig,r=x._leftRulerConfig,H=Y.size;if(D&&f){var l=m.size!=S?m.size:H,j=E.size!=S?E.size:H,T=A.size!=S?A.size:H,z=r.size!=S?r.size:H;x.$7k(Z,m,"border-bottom",D.offsetWidth,B,!0,r.visible,L,z,E.visible,K,j),x.$7k(h,E,"border-left",D.offsetHeight,K,!1,m.visible,B,l,A.visible,X,T),x.$7k(R,A,"border-top",D.offsetWidth,X,!0,r.visible,L,z,E.visible,K,j),x.$7k(N,r,"border-right",D.offsetHeight,L,!1,m.visible,B,l,A.visible,X,T),x.$13k?delete x.$13k:x.invalidateComponent(f),x.validateComponent(f),x.$5k()}},$5k:function(){function W(A,h,k,m,o,_){if(h.visible){var j=U(A),W=h[p]||O,v=h[q]!=S?h[q]:J,e=h[c]||T,M=h[V]||E,b=h.size!=S?h.size:D,tn=h[g]||d,Sq=h[n]||X,as=h[N]||y,Xd=h[a]!=S?h[a]:s,Ic=h[w]!=S?h[w]:F,Jh=h[G]!=S?h[G]:Q,Nj=h[B]!=S?h[B]:Y,ze=h[f]!=S?h[f]:$,Pk=h[Z]!=S?h[Z]:l,Pp=h[r]||tl,Ap=h[K]||hn;v&&(W=u[_]=u.$8k(u[_]||W,h[z]||R,h[P]||H,m?t:I,Sq)),k.call(u,j,L,C,i,x,b,m?t:I,W,e,M,o,tn,as);var xo=u.$16k;(Xd||Ic)&&xo&&(m?u.$9k(j,xo.x,b,Pp,Ap,Xd,Ic,Jh,Nj,ze,Pk):u.$10k(j,xo.y,b,Pp,Ap,Xd,Ic,Jh,Nj,ze,Pk,o))}}var u=this,M=u.$1k,h=u.$2k,b=u.$3k,A=u.$4k,e=u._topRulerConfig,k=u._rightRulerConfig,o=u._bottomRulerConfig,m=u._leftRulerConfig,v=u._defaultRulerConfig,_=u._component,j=u.getComponentViewRect(_),t=u.getComponentHZoom(_),I=u.getComponentVZoom(_),L=j.x*t,i=L+j.width*t,C=j.y*I,x=C+j.height*I,D=u._defaultRulerConfig.size,p="defaultMajorTickSpacing",z="maxPhysicalMajorTickSpacing",P="minPhysicalMajorTickSpacing",q="tickSpacingAdaptable",c="majorTickTextFont",V="majorTickTextColor",g="majorTickColor",N="minorTickColor",a="guideVisible",w="guideTipVisible",G="guideTipBorderColor",B="guideTipTextColor",f="guideTipTextFont",Z="guideTipBackground",r="guideColor",K="guideWidth",n="minMajorTickSpacing",O=v[p],R=v[z],H=v[P],J=v[q],T=v[c],E=v[V],d=v[g],X=v[n],y=v[N],s=v[a],F=v[w],Q=v[G],Y=v[B],$=v[f],l=v[Z],tl=v[r],hn=v[K];u._view&&_&&(W(M,e,u.$11k,!0,!1,"_currentTopMajorTickSpacing"),W(h,k,u.$12k,!1,!0,"_currentRightMajorTickSpacing"),W(b,o,u.$11k,!0,!0,"_currentBottomMajorTickSpacing"),W(A,m,u.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(R,q,U,v,Y){return U>R*v?R=J(q/v/Y)*Y:R*v>q&&(R=f(U/v/Y)*Y),R},getHTipText:function(o){var Q=this,a=Q._component,W=0,U=Q._view.getBoundingClientRect();return a.lp?W=l(a.lp({x:o.x+U.left,y:o.y}).x):W-=l(this.getComponentView(a).style.left)||0,W},$9k:function(F,P,w,t,Q,e,n,O,S,f,h){var J=this,r=J._component;F.save(),b.translateAndScale(F,0,0,1);var K=P-(l(this.getComponentView(r).style.left)||0),L=0;if(P=J.getHTipText(J.$16k),e&&(F.beginPath(),F.fillStyle=t,F.rect(K,L,Q,w),F.fill()),n){F.beginPath(),F.textAlign="center",F.textBaseline="middle",F.font=f;var E=F.measureText(P).width+6;F.fillStyle=h,F.rect(K-E/2,L,E,w),F.fill(),F.strokeStyle=O,F.stroke(),F.beginPath(),F.fillStyle=S,F.fillText(P,K,L+w/2)}F.restore()},getVTipText:function(i){var t=this,I=t._component,D=0,O=t._view.getBoundingClientRect();return I.lp?D=l(I.lp({x:i.x,y:i.y+O.top}).y):D-=l(this.getComponentView(I).style.top)||0,D},formatScaleText:function(l){return Math.round(l)},$10k:function(g,I,x,X,t,w,s,J,c,h,B,U){var T=this,D=T._component;g.save(),b.translateAndScale(g,0,0,1);var u=x/2,O=I-(l(this.getComponentView(D).style.top)||0);if(I=T.getVTipText(T.$16k),w&&(g.beginPath(),g.fillStyle=X,g.rect(u-x/2,O,x,t),g.fill()),s){g.translate(u,O),g.rotate((U?90:-90)*j/180),g.translate(-u,-O),g.beginPath(),g.textAlign="center",g.textBaseline="middle",g.font=h;var k=g.measureText(I).width+6;g.fillStyle=B,g.rect(u-k/2,O-x/2,k,x),g.fill(),g.strokeStyle=J,g.stroke(),g.fillStyle=c,g.fillText(I,u,O)}g.restore()},$11k:function(P,A,U,g,Y,S,c,y,O,k,s,_,v){P.save(),U=0;var H=A,D=g,x=(H+D)/2;A=0,g=D-H,b.translateAndScale(P,0,0,1);var i=0,f=0,z=l(S/2),h=S-z,N=s?0:z,B=y*c,L=B/10;A-=B,g+=B,P.clearRect(A,0,g-A,S),P.beginPath(),P.fillStyle=v;var j=J(x/L)*L-H;for(i=j;g>i;i+=L)P.rect(i,U+N,1,h);for(i=j;i>A;i-=L)P.rect(i,U+N,1,h);for(P.fill(),N=s?0:1,P.beginPath(),P.fillStyle=_,j=J(x/B)*B-H,i=j;g>i;i+=B)P.rect(i,U+N,1,S-1);for(i=j;i>A;i-=B)P.rect(i,U+N,1,S-1);P.fill();var d=l(/\d+px/.exec(O)[0]),R=(d||10)/2;P.textBaseline="middle",N=s?S-R-2:R+2,P.beginPath(),P.fillStyle=k,P.font=O;var n=J(x/B)*B/c;for(i=j,f=n;g>i;i+=B,f+=y){var F=this.getHScaleText?this.getHScaleText(i):f;P.fillText(this.formatScaleText(F),i+2,U+N)}for(i=j,f=n;i>A;i-=B,f-=y){var F=this.getHScaleText?this.getHScaleText(i):f;P.fillText(this.formatScaleText(F),i+2,U+N)}P.restore()},$12k:function(g,C,d,P,o,B,t,p,D,w,m,n,O){function N(d,l,_,D,m,A){m=e.getVScaleText?e.getVScaleText(_):m,m=e.formatScaleText(m),g.translate(d+l,_),g.rotate(-D),g.translate(-d-l,-_),g.fillText(m,d+l+(A?2:1),_),g.translate(d+l,_),g.rotate(D),g.translate(-d-l,-_)}g.save(),C=0;var Z=d,G=o,_=(Z+G)/2;d=0,o=G-Z,b.translateAndScale(g,0,0,1);var U=0,e=this,T=0,Y=l(B/2),H=B-Y,y=m?0:Y,c=p*t,r=c/10;d-=c,o+=c,g.clearRect(C,0,B,o-d),g.beginPath(),g.fillStyle=O;var h=J(_/r)*r-Z;for(U=h;o>U;U+=r)g.rect(C+y,U,H,1);for(U=h;U>d;U-=r)g.rect(C+y,U,H,1);for(g.fill(),y=m?0:1,g.beginPath(),g.fillStyle=n,h=J(_/c)*c-Z,U=h;o>U;U+=c)g.rect(C+y,U,B-1,1);for(U=h;U>d;U-=c)g.rect(C+y,U,B-1,1);g.fill();var W=l(/\d+px/.exec(D)[0]),A=(W||10)/2,q=90*j/180;g.textBaseline="middle",y=m?B-A:A+2,q=m?-q:q,g.beginPath(),g.fillStyle=w,g.font=D;var z=J(_/c)*c/t;for(U=h,T=z;o>U;U+=c,T+=p)N(C,y,U,q,T,m);for(U=h,T=z;U>d;U-=c,T-=p)N(C,y,U,q,T,m);g.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var o=this,e=o._component,M=o._view;e&&o.removeComponentPropertyChangeListener(e,o.$14k),M&&(D(M,"mousemove",o.$15k),z(M.parentNode,M),o._view=null)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);